generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User{
  id          Int         @id @default(autoincrement())
  email       String      @unique
  password    String
  userName    String      @unique
  name        String?
  avatarUrl   String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt

  posts       Post[]
  likes       Like[]
}

model Post{
  id          Int        @id @default(autoincrement())
  content     String 
  author      User       @relation(fields: [authorId], references: [id], onDelete: Cascade)
  authorId    Int
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  
  likes       Like[]
}

model Like{
  id         Int       @id @default(autoincrement())
  user       User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId     Int
  post       Post      @relation(fields: [postId], references: [id], onDelete: Cascade)
  postId     Int
  createdAt  DateTime  @default(now())

  @@unique([userId, postId])
}

